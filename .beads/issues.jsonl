{"id":"ef-1c5","title":"Phase 2.3: Running tool indicators","description":"Show running tools with spinner/animation: '⟳ tool_name... (2.1s)'. Update elapsed time periodically. Convert to success/failure when complete. Update in-place, no re-render.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:09.843777-08:00","updated_at":"2025-11-29T12:44:09.843777-08:00","dependencies":[{"issue_id":"ef-1c5","depends_on_id":"ef-ys1","type":"blocks","created_at":"2025-11-29T12:45:42.468576-08:00","created_by":"daemon"}]}
{"id":"ef-251","title":"Phase 1.4: User and Claude message display","description":"Render user messages with '\u003e ' prefix. Render Claude messages inline with proper faces. Support multi-line messages. User messages go to conversation region when sent from input region.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-29T12:43:57.806743-08:00","updated_at":"2025-11-29T12:43:57.806743-08:00","dependencies":[{"issue_id":"ef-251","depends_on_id":"ef-8v7","type":"blocks","created_at":"2025-11-29T12:45:33.773194-08:00","created_by":"daemon"}]}
{"id":"ef-5wx","title":"Phase 5.1: Inline TODO display in conversation","description":"When Claude creates TODOs, show them inline in conversation with checkboxes. Update in-place as TODOs complete. Format: ✓/▶/☐ with task text.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T12:44:31.826809-08:00","updated_at":"2025-11-29T12:44:31.826809-08:00","dependencies":[{"issue_id":"ef-5wx","depends_on_id":"ef-251","type":"blocks","created_at":"2025-11-29T12:45:51.227457-08:00","created_by":"daemon"}]}
{"id":"ef-6t7","title":"Phase 2.4: Tool result success/failure display","description":"Show tool results inline: success (✓) or failure (✗). Failed tools auto-expand to show error. Success shows truncated result. Verbosity controls how much to show.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:09.877934-08:00","updated_at":"2025-11-29T12:44:09.877934-08:00","dependencies":[{"issue_id":"ef-6t7","depends_on_id":"ef-ys1","type":"blocks","created_at":"2025-11-29T12:45:42.512001-08:00","created_by":"daemon"}]}
{"id":"ef-7ox","title":"Phase 3.1: Streaming content display","description":"Display Claude's response character-by-character as it streams. Hook into efrit-executor content events. Append characters to current message region. Smooth typing feel.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:22.791555-08:00","updated_at":"2025-11-29T12:44:22.791555-08:00","dependencies":[{"issue_id":"ef-7ox","depends_on_id":"ef-251","type":"blocks","created_at":"2025-11-29T12:45:42.551955-08:00","created_by":"daemon"}]}
{"id":"ef-8v7","title":"Phase 1.1: Conversation buffer layout with regions","description":"Restructure efrit-agent buffer from section-based to conversation-based layout. Remove section headers. Create conversation region (read-only) + input region (editable). Use markers for boundaries. Header-line for status.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-29T12:43:46.159982-08:00","updated_at":"2025-11-29T12:43:46.159982-08:00"}
{"id":"ef-8wj","title":"Phase 1.2: Header-line status display","description":"Implement header-line-format for persistent status display. Show: status indicator, elapsed time, current context, tool count, action buttons. Updates via timer without re-rendering buffer.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-29T12:43:57.725713-08:00","updated_at":"2025-11-29T12:43:57.725713-08:00","dependencies":[{"issue_id":"ef-8wj","depends_on_id":"ef-8v7","type":"blocks","created_at":"2025-11-29T12:45:33.731281-08:00","created_by":"daemon"}]}
{"id":"ef-e8q","title":"Phase 1.5: Input region with minor mode","description":"Create efrit-agent-input-mode minor mode for input region. Keybindings: RET/C-c C-c to send, S-RET for newline, M-p/M-n for history. Input transferred to conversation on send.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T12:43:57.843391-08:00","updated_at":"2025-11-29T12:43:57.843391-08:00","dependencies":[{"issue_id":"ef-e8q","depends_on_id":"ef-8v7","type":"blocks","created_at":"2025-11-29T12:45:33.794006-08:00","created_by":"daemon"}]}
{"id":"ef-ei9","title":"Epic: World-class *efrit-agent* buffer for agentic workflows","description":"## Overview\nCreate a best-in-class agentic session buffer that feels like **chatting with a colleague who shows their work**.\n\n## Design Document\nSee: docs/designs/efrit-agent-buffer-design.md\n\n## Core Principle\n**Conversation first, structure as enhancement.**\n\n## Implementation Phases\n- **Phase 1:** Core conversation architecture (layout, messages, incremental updates)\n- **Phase 2:** Tool call display (collapse/expand, results, running indicators)\n- **Phase 3:** Streaming \u0026 thinking indicators\n- **Phase 4:** Enhanced interactions (diffs, options, error recovery)\n- **Phase 5:** Polish (TODOs inline, history, multi-session)\n\n## Success Metrics\n1. Feels like chatting with a colleague\n2. Can see exactly what Efrit is doing at any moment\n3. Can intervene (pause, redirect, input) without friction\n4. No flicker or jank during updates\n5. Comparable to Claude Code's terminal experience","status":"open","priority":1,"issue_type":"epic","created_at":"2025-11-29T12:46:29.111758-08:00","updated_at":"2025-11-29T12:46:29.111758-08:00"}
{"id":"ef-ey0","title":"Phase 1.1: Conversation buffer layout with regions","description":"## Summary\nRestructure efrit-agent buffer from section-based to conversation-based layout.\n\n## Requirements\n1. Remove section headers (Tasks, Activity, Input sections)\n2. Create conversation region (read-only, scrollable)\n3. Create input region (editable, at buffer end)\n4. Use markers to track region boundaries\n5. Header-line for status (not in-buffer header)\n\n## Implementation\n```elisp\n;; Buffer structure\n(defvar-local efrit-agent--conversation-end nil\n  \"Marker at end of conversation region.\")\n(defvar-local efrit-agent--input-start nil\n  \"Marker at start of input region.\")\n\n;; Header-line instead of in-buffer header\n(setq header-line-format '(:eval (efrit-agent--format-header-line)))\n```\n\n## Acceptance Criteria\n- [ ] Buffer has two regions: conversation (read-only) + input (editable)\n- [ ] Markers correctly track boundaries\n- [ ] header-line shows status, not in-buffer text\n- [ ] Input region has separate keymap\n- [ ] No section separators in conversation\n\n## Technical Notes\n- Derive from special-mode but make input region editable\n- Use text property `read-only` for conversation\n- Input region uses minor mode for key bindings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T12:43:41.207671-08:00","updated_at":"2025-11-29T12:45:33.598864-08:00","closed_at":"2025-11-29T12:45:33.598864-08:00"}
{"id":"ef-fii","title":"Phase 4.4: Input history navigation","description":"M-p/M-n navigate through previous inputs. Store input history per-session and globally. History persists across Emacs restarts.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T12:44:22.976647-08:00","updated_at":"2025-11-29T12:44:22.976647-08:00","dependencies":[{"issue_id":"ef-fii","depends_on_id":"ef-e8q","type":"blocks","created_at":"2025-11-29T12:45:51.18601-08:00","created_by":"daemon"}]}
{"id":"ef-g3n","title":"Phase 2.2: Overlay-based tool expansion","description":"Use overlays to show expanded tool details. When expanded, overlay appears below tool line showing input, result, elapsed time. Toggle with RET. Supports multiple expanded simultaneously.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:09.807879-08:00","updated_at":"2025-11-29T12:44:09.807879-08:00","dependencies":[{"issue_id":"ef-g3n","depends_on_id":"ef-ys1","type":"blocks","created_at":"2025-11-29T12:45:42.420212-08:00","created_by":"daemon"}]}
{"id":"ef-kx0","title":"Phase 5.2: Context-aware input completion","description":"Provide completion in input region based on context. File paths when discussing files. Function names from current buffer. Options from Claude's question.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T12:44:31.864162-08:00","updated_at":"2025-11-29T12:44:31.864162-08:00","dependencies":[{"issue_id":"ef-kx0","depends_on_id":"ef-e8q","type":"blocks","created_at":"2025-11-29T12:45:51.276267-08:00","created_by":"daemon"}]}
{"id":"ef-kxq","title":"Phase 4.3: Error recovery actions","description":"When tool fails, show actionable recovery buttons. Examples: [Retry] [Skip] [Make Writable] [Abort]. Buttons trigger appropriate executor actions.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T12:44:22.941495-08:00","updated_at":"2025-11-29T12:44:22.941495-08:00","dependencies":[{"issue_id":"ef-kxq","depends_on_id":"ef-6t7","type":"blocks","created_at":"2025-11-29T12:45:51.142326-08:00","created_by":"daemon"}]}
{"id":"ef-llz","title":"Phase 1.3: Incremental message rendering","description":"Replace full-buffer re-render with incremental updates. Append-only for new messages. Update-in-place for tool results. Use text properties to identify updateable regions. No erase-buffer during active session.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-29T12:43:57.76861-08:00","updated_at":"2025-11-29T12:43:57.76861-08:00","dependencies":[{"issue_id":"ef-llz","depends_on_id":"ef-8v7","type":"blocks","created_at":"2025-11-29T12:45:33.753075-08:00","created_by":"daemon"}]}
{"id":"ef-qeu","title":"Phase 4.2: Option buttons for questions","description":"When Claude asks multiple-choice question, show clickable option buttons. Format: '[1] OAuth [2] JWT [3] Session'. Number keys select. Buttons have hover states.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:22.904325-08:00","updated_at":"2025-11-29T12:44:22.904325-08:00","dependencies":[{"issue_id":"ef-qeu","depends_on_id":"ef-e8q","type":"blocks","created_at":"2025-11-29T12:45:51.096664-08:00","created_by":"daemon"}]}
{"id":"ef-sch","title":"Phase 3.2: Thinking indicators","description":"Show thinking indicator when Claude is processing but no tool running. Format: '[thinking...] analyzing...' or with progress bar. Disappears when content starts.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T12:44:22.831564-08:00","updated_at":"2025-11-29T12:44:22.831564-08:00","dependencies":[{"issue_id":"ef-sch","depends_on_id":"ef-7ox","type":"blocks","created_at":"2025-11-29T12:45:42.592982-08:00","created_by":"daemon"}]}
{"id":"ef-uvi","title":"Phase 4.1: Inline diff display for edits","description":"When edit/write tools complete, show unified diff inline. Use diff-mode faces for +/- lines. Configurable context lines. Part of expanded tool view.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:22.868679-08:00","updated_at":"2025-11-29T12:44:22.868679-08:00","dependencies":[{"issue_id":"ef-uvi","depends_on_id":"ef-g3n","type":"blocks","created_at":"2025-11-29T12:45:51.052664-08:00","created_by":"daemon"}]}
{"id":"ef-ys1","title":"Phase 2.1: Inline collapsed tool calls","description":"Render tool calls inline in conversation as single collapsible line. Format: '▶ tool_name target ✓ (0.3s)'. Use text properties to store tool data. Clicking or RET expands.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:09.767395-08:00","updated_at":"2025-11-29T12:44:09.767395-08:00","dependencies":[{"issue_id":"ef-ys1","depends_on_id":"ef-llz","type":"blocks","created_at":"2025-11-29T12:45:42.365294-08:00","created_by":"daemon"}]}
{"id":"ef-zum","title":"Phase 5.3: Session persistence and restore","description":"Save session state to disk. Restore conversation on buffer revisit. Serialize messages, tool calls, results. Support session resume.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T12:44:31.899735-08:00","updated_at":"2025-11-29T12:44:31.899735-08:00","dependencies":[{"issue_id":"ef-zum","depends_on_id":"ef-llz","type":"blocks","created_at":"2025-11-29T12:45:51.319587-08:00","created_by":"daemon"}]}
