{"id":"ef-0c6","title":"Implement incremental message rendering","description":"Replace full-buffer re-render with incremental updates. Append-only for new messages. Update-in-place for tool results. No erase-buffer during active session.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T13:27:23.316669-08:00","updated_at":"2025-11-29T21:19:08.471731-08:00","closed_at":"2025-11-29T21:19:08.471731-08:00","close_reason":"Implemented incremental message rendering:\n- Added efrit-agent--find-tool-region to locate tool calls by ID\n- Added efrit-agent--update-tool-result for in-place tool updates (no full re-render)\n- Updated efrit-agent--on-tool-start to use conversation-first approach\n- Updated efrit-agent--on-tool-result to use in-place updates\n- Added efrit-agent--pending-tools hash table to track tool-ids for result matching\n- User messages, Claude messages, and tool calls now append incrementally\n- Tool results update in-place without erase-buffer\n- Verified with automated tests (8/8 core tests + 5/5 integration tests pass)","dependencies":[{"issue_id":"ef-0c6","depends_on_id":"ef-8t0","type":"blocks","created_at":"2025-11-29T13:28:10.33956-08:00","created_by":"daemon"}]}
{"id":"ef-1c5","title":"Phase 2.3: Running tool indicators","description":"Show running tools with spinner/animation: '⟳ tool_name... (2.1s)'. Update elapsed time periodically. Convert to success/failure when complete. Update in-place, no re-render.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:09.843777-08:00","updated_at":"2025-11-29T13:27:09.354659-08:00","closed_at":"2025-11-29T13:27:09.354659-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-1c5","depends_on_id":"ef-ys1","type":"blocks","created_at":"2025-11-29T12:45:42.468576-08:00","created_by":"daemon"}]}
{"id":"ef-1cr","title":"Add context-aware input completion","description":"Completion in input based on context. File paths when discussing files. Function names from buffer. Options from questions.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T13:27:55.080565-08:00","updated_at":"2025-11-29T13:27:55.080565-08:00","dependencies":[{"issue_id":"ef-1cr","depends_on_id":"ef-s2o","type":"blocks","created_at":"2025-11-29T13:28:10.640725-08:00","created_by":"daemon"}]}
{"id":"ef-1ls","title":"Add conversation/input region markers and boundaries","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T14:23:59.676838-08:00","updated_at":"2025-11-29T14:29:50.175894-08:00","closed_at":"2025-11-29T14:29:50.175894-08:00","close_reason":"Added conversation/input region markers with efrit-agent--conversation-end and efrit-agent--input-start. Implemented setup, append, get-input, clear-input functions. All tests pass."}
{"id":"ef-1rk","title":"Implement session persistence","description":"Save session state to disk. Restore on buffer revisit. Serialize messages, tool calls, results. Support resume.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T13:27:55.120318-08:00","updated_at":"2025-11-29T13:27:55.120318-08:00","dependencies":[{"issue_id":"ef-1rk","depends_on_id":"ef-0c6","type":"blocks","created_at":"2025-11-29T13:28:10.66255-08:00","created_by":"daemon"}]}
{"id":"ef-251","title":"Phase 1.4: User and Claude message display","description":"Render user messages with '\u003e ' prefix. Render Claude messages inline with proper faces. Support multi-line messages. User messages go to conversation region when sent from input region.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T12:43:57.806743-08:00","updated_at":"2025-11-29T13:27:09.170821-08:00","closed_at":"2025-11-29T13:27:09.170821-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-251","depends_on_id":"ef-8v7","type":"blocks","created_at":"2025-11-29T12:45:33.773194-08:00","created_by":"daemon"}]}
{"id":"ef-26z","title":"Add streaming content display","description":"Display Claude's response character-by-character as it streams. Hook into executor content events. Append to current message region. Smooth typing feel.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T13:27:46.136043-08:00","updated_at":"2025-11-29T13:27:46.136043-08:00","dependencies":[{"issue_id":"ef-26z","depends_on_id":"ef-aqn","type":"blocks","created_at":"2025-11-29T13:28:10.491247-08:00","created_by":"daemon"}]}
{"id":"ef-5wx","title":"Phase 5.1: Inline TODO display in conversation","description":"When Claude creates TODOs, show them inline in conversation with checkboxes. Update in-place as TODOs complete. Format: ✓/▶/☐ with task text.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-29T12:44:31.826809-08:00","updated_at":"2025-11-29T13:27:09.499704-08:00","closed_at":"2025-11-29T13:27:09.499704-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-5wx","depends_on_id":"ef-251","type":"blocks","created_at":"2025-11-29T12:45:51.227457-08:00","created_by":"daemon"}]}
{"id":"ef-6t7","title":"Phase 2.4: Tool result success/failure display","description":"Show tool results inline: success (✓) or failure (✗). Failed tools auto-expand to show error. Success shows truncated result. Verbosity controls how much to show.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:09.877934-08:00","updated_at":"2025-11-29T13:27:09.33072-08:00","closed_at":"2025-11-29T13:27:09.33072-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-6t7","depends_on_id":"ef-ys1","type":"blocks","created_at":"2025-11-29T12:45:42.512001-08:00","created_by":"daemon"}]}
{"id":"ef-74y","title":"Create efrit-agent-input-mode minor mode","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T14:24:01.548444-08:00","updated_at":"2025-11-29T14:32:25.434808-08:00","closed_at":"2025-11-29T14:32:25.434808-08:00","close_reason":"Added efrit-agent-input-mode minor mode with send/clear/history commands. Mode auto-activates when point is in input region via post-command-hook.","dependencies":[{"issue_id":"ef-74y","depends_on_id":"ef-1ls","type":"blocks","created_at":"2025-11-29T14:24:12.051246-08:00","created_by":"daemon"}]}
{"id":"ef-7ox","title":"Phase 3.1: Streaming content display","description":"Display Claude's response character-by-character as it streams. Hook into efrit-executor content events. Append characters to current message region. Smooth typing feel.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:22.791555-08:00","updated_at":"2025-11-29T13:27:09.308415-08:00","closed_at":"2025-11-29T13:27:09.308415-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-7ox","depends_on_id":"ef-251","type":"blocks","created_at":"2025-11-29T12:45:42.551955-08:00","created_by":"daemon"}]}
{"id":"ef-8qi","title":"Add header-line status display","description":"Use header-line-format for persistent status. Show: status indicator, elapsed time, context, tool count, action buttons. Timer updates without re-rendering buffer.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T13:27:23.280638-08:00","updated_at":"2025-11-29T14:32:40.92153-08:00","closed_at":"2025-11-29T14:32:40.92153-08:00","close_reason":"Completed as part of ef-d0s - header-line implemented","dependencies":[{"issue_id":"ef-8qi","depends_on_id":"ef-8t0","type":"blocks","created_at":"2025-11-29T13:28:10.3172-08:00","created_by":"daemon"}]}
{"id":"ef-8t0","title":"Implement conversation-first buffer layout","description":"Restructure efrit-agent from section-based to conversation-based. Create conversation region (read-only) + input region (editable). Use markers for boundaries. Remove section headers.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T13:27:23.23757-08:00","updated_at":"2025-11-29T14:32:47.460764-08:00","closed_at":"2025-11-29T14:32:47.460764-08:00","close_reason":"Conversation-first layout implemented: conversation region (read-only) + input region (editable) with markers, header-line status, and input minor mode. Subtasks ef-0c6 and ef-aqn remain for incremental rendering and message display."}
{"id":"ef-8v7","title":"Phase 1.1: Conversation buffer layout with regions","description":"Restructure efrit-agent buffer from section-based to conversation-based layout. Remove section headers. Create conversation region (read-only) + input region (editable). Use markers for boundaries. Header-line for status.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T12:43:46.159982-08:00","updated_at":"2025-11-29T13:27:09.240462-08:00","closed_at":"2025-11-29T13:27:09.240462-08:00","close_reason":"Recreating without Phase naming"}
{"id":"ef-8wj","title":"Phase 1.2: Header-line status display","description":"Implement header-line-format for persistent status display. Show: status indicator, elapsed time, current context, tool count, action buttons. Updates via timer without re-rendering buffer.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T12:43:57.725713-08:00","updated_at":"2025-11-29T13:27:09.217007-08:00","closed_at":"2025-11-29T13:27:09.217007-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-8wj","depends_on_id":"ef-8v7","type":"blocks","created_at":"2025-11-29T12:45:33.731281-08:00","created_by":"daemon"}]}
{"id":"ef-90y","title":"Display inline diffs for file edits","description":"Show unified diff inline when edit/write tools complete. Use diff-mode faces. Configurable context lines. Part of expanded tool view.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T13:27:46.210738-08:00","updated_at":"2025-11-29T13:27:46.210738-08:00","dependencies":[{"issue_id":"ef-90y","depends_on_id":"ef-l47","type":"blocks","created_at":"2025-11-29T13:28:10.53586-08:00","created_by":"daemon"}]}
{"id":"ef-aqn","title":"Render user and Claude messages","description":"User messages with '\u003e ' prefix. Claude messages inline with proper faces. Multi-line support. Messages go to conversation region when sent.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T13:27:23.349979-08:00","updated_at":"2025-11-29T17:18:15.436115-08:00","closed_at":"2025-11-29T17:18:15.436115-08:00","close_reason":"Implemented user and Claude message rendering with proper faces, multi-line support, and incremental append to conversation region","dependencies":[{"issue_id":"ef-aqn","depends_on_id":"ef-8t0","type":"blocks","created_at":"2025-11-29T13:28:10.363936-08:00","created_by":"daemon"}]}
{"id":"ef-c3b","title":"Add error recovery action buttons","description":"When tool fails, show actionable buttons: [Retry] [Skip] [Make Writable] [Abort]. Buttons trigger executor actions.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T13:27:46.278268-08:00","updated_at":"2025-11-29T13:27:46.278268-08:00","dependencies":[{"issue_id":"ef-c3b","depends_on_id":"ef-llr","type":"blocks","created_at":"2025-11-29T13:28:10.597765-08:00","created_by":"daemon"}]}
{"id":"ef-cs2","title":"Show running tool indicators","description":"Running tools show spinner: '⟳ tool_name... (2.1s)'. Elapsed time updates periodically. Converts to success/failure when complete.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T13:27:33.896027-08:00","updated_at":"2025-11-29T22:46:25.157546-08:00","closed_at":"2025-11-29T22:46:25.157546-08:00","close_reason":"Running tools show spinner indicator and ellipsis until result arrives.","dependencies":[{"issue_id":"ef-cs2","depends_on_id":"ef-t5r","type":"blocks","created_at":"2025-11-29T13:28:10.450253-08:00","created_by":"daemon"}]}
{"id":"ef-d0s","title":"Implement header-line-format for status display","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T14:24:00.548208-08:00","updated_at":"2025-11-29T14:31:21.865579-08:00","closed_at":"2025-11-29T14:31:21.865579-08:00","close_reason":"Added efrit-agent--format-header-line and efrit-agent--setup-header-line. Header shows status, elapsed time, tool count, and context-sensitive hints. Updates via force-mode-line-update.","dependencies":[{"issue_id":"ef-d0s","depends_on_id":"ef-1ls","type":"blocks","created_at":"2025-11-29T14:24:12.013985-08:00","created_by":"daemon"}]}
{"id":"ef-e8q","title":"Phase 1.5: Input region with minor mode","description":"Create efrit-agent-input-mode minor mode for input region. Keybindings: RET/C-c C-c to send, S-RET for newline, M-p/M-n for history. Input transferred to conversation on send.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T12:43:57.843391-08:00","updated_at":"2025-11-29T13:27:09.430206-08:00","closed_at":"2025-11-29T13:27:09.430206-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-e8q","depends_on_id":"ef-8v7","type":"blocks","created_at":"2025-11-29T12:45:33.794006-08:00","created_by":"daemon"}]}
{"id":"ef-ei9","title":"Epic: World-class *efrit-agent* buffer for agentic workflows","description":"## Overview\nCreate a best-in-class agentic session buffer that feels like **chatting with a colleague who shows their work**.\n\n## Design Document\nSee: docs/designs/efrit-agent-buffer-design.md\n\n## Core Principle\n**Conversation first, structure as enhancement.**\n\n## Development Philosophy\n**Small, clean progress over large, messy progress.**\n- Keep functions focused and single-purpose\n- Split files when they grow beyond ~300-400 lines\n- Organize code into logical modules as patterns emerge\n- Refactor continuously rather than accumulating tech debt\n- Each commit should leave the codebase better organized than before\n\n## Implementation Phases\n- **Phase 1:** Core conversation architecture (layout, messages, incremental updates)\n- **Phase 2:** Tool call display (collapse/expand, results, running indicators)\n- **Phase 3:** Streaming \u0026 thinking indicators\n- **Phase 4:** Enhanced interactions (diffs, options, error recovery)\n- **Phase 5:** Polish (TODOs inline, history, multi-session)\n\n## Success Metrics\n1. Feels like chatting with a colleague\n2. Can see exactly what Efrit is doing at any moment\n3. Can intervene (pause, redirect, input) without friction\n4. No flicker or jank during updates\n5. Comparable to Claude Code's terminal experience","status":"open","priority":1,"issue_type":"epic","created_at":"2025-11-29T12:46:29.111758-08:00","updated_at":"2025-11-29T14:18:56.066454-08:00"}
{"id":"ef-eir","title":"Show thinking indicators","description":"Display when Claude processing but no tool running. Format: '[thinking...] analyzing...'. Disappears when content starts.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T13:27:46.173884-08:00","updated_at":"2025-11-29T13:27:46.173884-08:00","dependencies":[{"issue_id":"ef-eir","depends_on_id":"ef-26z","type":"blocks","created_at":"2025-11-29T13:28:10.513988-08:00","created_by":"daemon"}]}
{"id":"ef-ey0","title":"Phase 1.1: Conversation buffer layout with regions","description":"## Summary\nRestructure efrit-agent buffer from section-based to conversation-based layout.\n\n## Requirements\n1. Remove section headers (Tasks, Activity, Input sections)\n2. Create conversation region (read-only, scrollable)\n3. Create input region (editable, at buffer end)\n4. Use markers to track region boundaries\n5. Header-line for status (not in-buffer header)\n\n## Implementation\n```elisp\n;; Buffer structure\n(defvar-local efrit-agent--conversation-end nil\n  \"Marker at end of conversation region.\")\n(defvar-local efrit-agent--input-start nil\n  \"Marker at start of input region.\")\n\n;; Header-line instead of in-buffer header\n(setq header-line-format '(:eval (efrit-agent--format-header-line)))\n```\n\n## Acceptance Criteria\n- [ ] Buffer has two regions: conversation (read-only) + input (editable)\n- [ ] Markers correctly track boundaries\n- [ ] header-line shows status, not in-buffer text\n- [ ] Input region has separate keymap\n- [ ] No section separators in conversation\n\n## Technical Notes\n- Derive from special-mode but make input region editable\n- Use text property `read-only` for conversation\n- Input region uses minor mode for key bindings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T12:43:41.207671-08:00","updated_at":"2025-11-29T12:45:33.598864-08:00","closed_at":"2025-11-29T12:45:33.598864-08:00","close_reason":"Duplicate of ef-8v7"}
{"id":"ef-fii","title":"Phase 4.4: Input history navigation","description":"M-p/M-n navigate through previous inputs. Store input history per-session and globally. History persists across Emacs restarts.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-29T12:44:22.976647-08:00","updated_at":"2025-11-29T13:27:09.52268-08:00","closed_at":"2025-11-29T13:27:09.52268-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-fii","depends_on_id":"ef-e8q","type":"blocks","created_at":"2025-11-29T12:45:51.18601-08:00","created_by":"daemon"}]}
{"id":"ef-g3n","title":"Phase 2.2: Overlay-based tool expansion","description":"Use overlays to show expanded tool details. When expanded, overlay appears below tool line showing input, result, elapsed time. Toggle with RET. Supports multiple expanded simultaneously.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:09.807879-08:00","updated_at":"2025-11-29T13:27:09.379394-08:00","closed_at":"2025-11-29T13:27:09.379394-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-g3n","depends_on_id":"ef-ys1","type":"blocks","created_at":"2025-11-29T12:45:42.420212-08:00","created_by":"daemon"}]}
{"id":"ef-kx0","title":"Phase 5.2: Context-aware input completion","description":"Provide completion in input region based on context. File paths when discussing files. Function names from current buffer. Options from Claude's question.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-29T12:44:31.864162-08:00","updated_at":"2025-11-29T13:27:09.476652-08:00","closed_at":"2025-11-29T13:27:09.476652-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-kx0","depends_on_id":"ef-e8q","type":"blocks","created_at":"2025-11-29T12:45:51.276267-08:00","created_by":"daemon"}]}
{"id":"ef-kxq","title":"Phase 4.3: Error recovery actions","description":"When tool fails, show actionable recovery buttons. Examples: [Retry] [Skip] [Make Writable] [Abort]. Buttons trigger appropriate executor actions.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-29T12:44:22.941495-08:00","updated_at":"2025-11-29T13:27:09.545686-08:00","closed_at":"2025-11-29T13:27:09.545686-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-kxq","depends_on_id":"ef-6t7","type":"blocks","created_at":"2025-11-29T12:45:51.142326-08:00","created_by":"daemon"}]}
{"id":"ef-l47","title":"Implement overlay-based tool expansion","description":"Overlays show expanded tool details below tool line. Input, result, elapsed time visible. Toggle with RET. Multiple can be expanded.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T13:27:33.861963-08:00","updated_at":"2025-11-29T22:46:23.885553-08:00","closed_at":"2025-11-29T22:46:23.885553-08:00","close_reason":"Implemented tool expansion using text properties with TAB toggle. Shows input and full results when expanded.","dependencies":[{"issue_id":"ef-l47","depends_on_id":"ef-t5r","type":"blocks","created_at":"2025-11-29T13:28:10.427556-08:00","created_by":"daemon"}]}
{"id":"ef-llr","title":"Display tool results with success/failure","description":"Success (✓) or failure (✗) inline. Failed tools auto-expand with error. Success shows truncated result. Verbosity controls detail level.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T13:27:33.928048-08:00","updated_at":"2025-11-29T22:46:26.427474-08:00","closed_at":"2025-11-29T22:46:26.427474-08:00","close_reason":"Tool results display with ✓/✗ indicators, elapsed time, and result summary. Full results visible in expanded view.","dependencies":[{"issue_id":"ef-llr","depends_on_id":"ef-t5r","type":"blocks","created_at":"2025-11-29T13:28:10.470132-08:00","created_by":"daemon"}]}
{"id":"ef-llz","title":"Phase 1.3: Incremental message rendering","description":"Replace full-buffer re-render with incremental updates. Append-only for new messages. Update-in-place for tool results. Use text properties to identify updateable regions. No erase-buffer during active session.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T12:43:57.76861-08:00","updated_at":"2025-11-29T13:27:09.194949-08:00","closed_at":"2025-11-29T13:27:09.194949-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-llz","depends_on_id":"ef-8v7","type":"blocks","created_at":"2025-11-29T12:45:33.753075-08:00","created_by":"daemon"}]}
{"id":"ef-nsj","title":"Show TODOs inline in conversation","description":"When Claude creates TODOs, display inline with checkboxes. Update in-place as completed. Format: ✓/▶/☐ with task text.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T13:27:55.03904-08:00","updated_at":"2025-11-29T13:27:55.03904-08:00","dependencies":[{"issue_id":"ef-nsj","depends_on_id":"ef-aqn","type":"blocks","created_at":"2025-11-29T13:28:10.617679-08:00","created_by":"daemon"}]}
{"id":"ef-qeu","title":"Phase 4.2: Option buttons for questions","description":"When Claude asks multiple-choice question, show clickable option buttons. Format: '[1] OAuth [2] JWT [3] Session'. Number keys select. Buttons have hover states.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:22.904325-08:00","updated_at":"2025-11-29T13:27:09.264524-08:00","closed_at":"2025-11-29T13:27:09.264524-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-qeu","depends_on_id":"ef-e8q","type":"blocks","created_at":"2025-11-29T12:45:51.096664-08:00","created_by":"daemon"}]}
{"id":"ef-qo1","title":"Implement input history navigation","description":"M-p/M-n navigate previous inputs. Per-session and global history. Persists across restarts.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T13:27:46.313319-08:00","updated_at":"2025-11-29T13:27:46.313319-08:00","dependencies":[{"issue_id":"ef-qo1","depends_on_id":"ef-s2o","type":"blocks","created_at":"2025-11-29T13:28:10.576885-08:00","created_by":"daemon"}]}
{"id":"ef-qxv","title":"Render option buttons for questions","description":"When Claude asks multiple-choice, show clickable buttons. Format: '[1] OAuth [2] JWT'. Number keys select. Buttons have hover states.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T13:27:46.245812-08:00","updated_at":"2025-11-29T22:49:45.784119-08:00","closed_at":"2025-11-29T22:49:45.784119-08:00","close_reason":"Implemented option buttons in conversation-first architecture. Buttons show as [1] [2] etc with click and keyboard (1-4) selection, hover states, and context-aware input prompts.","dependencies":[{"issue_id":"ef-qxv","depends_on_id":"ef-s2o","type":"blocks","created_at":"2025-11-29T13:28:10.555842-08:00","created_by":"daemon"}]}
{"id":"ef-s2o","title":"Create input region with minor mode","description":"efrit-agent-input-mode for editable input area. RET/C-c C-c sends, S-RET newline, M-p/M-n history. Input transferred to conversation on send.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T13:27:23.385681-08:00","updated_at":"2025-11-29T14:32:40.957221-08:00","closed_at":"2025-11-29T14:32:40.957221-08:00","close_reason":"Completed as part of ef-74y - input mode implemented","dependencies":[{"issue_id":"ef-s2o","depends_on_id":"ef-8t0","type":"blocks","created_at":"2025-11-29T13:28:10.384499-08:00","created_by":"daemon"}]}
{"id":"ef-sch","title":"Phase 3.2: Thinking indicators","description":"Show thinking indicator when Claude is processing but no tool running. Format: '[thinking...] analyzing...' or with progress bar. Disappears when content starts.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-29T12:44:22.831564-08:00","updated_at":"2025-11-29T13:27:09.567888-08:00","closed_at":"2025-11-29T13:27:09.567888-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-sch","depends_on_id":"ef-7ox","type":"blocks","created_at":"2025-11-29T12:45:42.592982-08:00","created_by":"daemon"}]}
{"id":"ef-t5r","title":"Render inline collapsed tool calls","description":"Tool calls as single collapsible line in conversation. Format: '▶ tool_name target ✓ (0.3s)'. Text properties store tool data. RET expands.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T13:27:33.827966-08:00","updated_at":"2025-11-29T21:21:42.059609-08:00","closed_at":"2025-11-29T21:21:42.059609-08:00","close_reason":"Implemented inline collapsed tool calls:\n- Tools show with collapsed indicator (▶) by default\n- RET toggles expansion showing ▼ and full Input/Result content\n- Expansion content formatted with proper indentation\n- Verbosity levels control line limits (minimal:3, normal:10, verbose:50)\n- Text properties track expansion state (efrit-tool-expanded)\n- efrit-agent-toggle-expand now handles conversation-first tool calls\n- Verified with 10/10 expansion tests passing","dependencies":[{"issue_id":"ef-t5r","depends_on_id":"ef-0c6","type":"blocks","created_at":"2025-11-29T13:28:10.406596-08:00","created_by":"daemon"}]}
{"id":"ef-uvi","title":"Phase 4.1: Inline diff display for edits","description":"When edit/write tools complete, show unified diff inline. Use diff-mode faces for +/- lines. Configurable context lines. Part of expanded tool view.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:22.868679-08:00","updated_at":"2025-11-29T13:27:09.28644-08:00","closed_at":"2025-11-29T13:27:09.28644-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-uvi","depends_on_id":"ef-g3n","type":"blocks","created_at":"2025-11-29T12:45:51.052664-08:00","created_by":"daemon"}]}
{"id":"ef-ys1","title":"Phase 2.1: Inline collapsed tool calls","description":"Render tool calls inline in conversation as single collapsible line. Format: '▶ tool_name target ✓ (0.3s)'. Use text properties to store tool data. Clicking or RET expands.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T12:44:09.767395-08:00","updated_at":"2025-11-29T13:27:09.404732-08:00","closed_at":"2025-11-29T13:27:09.404732-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-ys1","depends_on_id":"ef-llz","type":"blocks","created_at":"2025-11-29T12:45:42.365294-08:00","created_by":"daemon"}]}
{"id":"ef-zum","title":"Phase 5.3: Session persistence and restore","description":"Save session state to disk. Restore conversation on buffer revisit. Serialize messages, tool calls, results. Support session resume.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-29T12:44:31.899735-08:00","updated_at":"2025-11-29T13:27:09.454337-08:00","closed_at":"2025-11-29T13:27:09.454337-08:00","close_reason":"Recreating without Phase naming","dependencies":[{"issue_id":"ef-zum","depends_on_id":"ef-llz","type":"blocks","created_at":"2025-11-29T12:45:51.319587-08:00","created_by":"daemon"}]}
